<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mypageSQL">
	
	<!--쿠폰  -->
	<select id = "getCouponList" resultType = "mypageCouponDTO" parameterType="String">
		select * from coupon where coupon_user_id = #{id}
	</select>
	
	<select id = "getCouponTotal" resultType = "int" parameterType="String">
		select count(*) from coupon where coupon_user_id = #{id}
	</select>
	
	<!--적립금  -->
	<select id = "getPointList" resultType = "mypagePointDTO" parameterType="String">
		select * from point where point_user_id = #{id}
	</select>
	
	<select id = "getPointTotal" resultType = "int" parameterType="String">
		select sum(point_price) from point where point_user_id = #{id}
	</select> 
	
	<insert id = "writeCoupon" parameterType = "String"> 
		insert into coupon values(#{member_id},'회원가입축하쿠폰','3000원 할인','할인',ADD_MONTHS(sysdate, 1),'사용가능','first_sign_up_coupon') 
	</insert>
	 
	<insert id = "writePoint" parameterType = "String">
		insert into point values(#{member_id},sysdate,'회원가입축하적립금',ADD_MONTHS(sysdate, 1),2000,'회원가입적립금','first_sign_up_Point')
	</insert> 
</mapper>