<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="memberSQL">
	<insert id="write" parameterType="memberDTO"> 
		insert into member values(nvl(#{member_id},0)
		,#{member_name}
		,nvl(#{member_pwd},0) 
		,#{member_email}
		,#{member_phone} 
		,#{member_address1}  
		,#{member_address2} 
		,nvl(#{member_birth},0) 
		,0,0,sysdate,#{member_eventAgree},#{member_loginType}) 
	</insert> 	  
	
	<select id="getMemberPwd" parameterType="String" resultType="String">
		select member_pwd from member where member_id = #{id}  
	</select>
	
	<select id="checkID" parameterType="String" resultType="int">
		select count(*) from member where member_id = #{id}    
	</select> 	
	
	<select id="login" parameterType="java.util.Map" resultType="memberDTO">
		select * from member where member_id = #{id} 
	</select> 	  	   	 
	
	<select id="checkAccount" parameterType="java.util.Map" resultType="memberDTO">
		select * from member where member_name = #{name} and member_id = #{email}
	</select>  
	
	<delete id="delete" parameterType="java.util.Map">
		delete from member where member_id = #{id}
	</delete>	
	
	<insert id="deleteInfo" parameterType="java.util.Map"> 
		insert into deleteInfo values(#{id}
		,nvl(#{deleteInfo_why},0)		
		,nvl(#{deleteInfo_Content},0)  
		,sysdate)		 
	</insert> 
	
	<update id = "modify1" parameterType="memberDTO" >
		update member 
		set member_name = #{member_name}
			, member_email = #{member_email}
			, member_phone = #{member_phone}
			, member_address1 = #{member_address1}
			, member_address2 = #{member_address2}
			, member_birth = #{member_birth}
			where member_id = #{member_id}
	</update>
	
	<update id = "modify2" parameterType="memberDTO" >
		update member 
		set member_name = #{member_name} 
			, member_pwd = #{member_pwd}
			, member_email = #{member_email}
			, member_phone = #{member_phone}
			, member_address1 = #{member_address1}
			, member_address2 = #{member_address2}
			, member_birth = #{member_birth}
			where member_id = #{member_id}
	</update> 
	
	<select id="getNaverAccount" resultType="int">
	 	 select count(*) from member where member_logintype = 'naver'
	 </select>
	 
	 <select id="getBitAccount" resultType="int">
	 	 select count(*) from member where member_logintype = 'bit'
	 </select>
	 
	 <select id="getKakaoAccount" resultType="int">
	 	 select count(*) from member where member_logintype = 'kakao'
	 </select>
</mapper>           